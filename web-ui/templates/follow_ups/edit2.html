<!doctype html>
<html>
    <head>

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        
        <link rel="icon" href="/static/images/favi.png" type="image/gif" sizes="16x9">
        
        <!--Loading JQuery UI css-->
        <link href="/static/css/jquery-ui.css" rel="stylesheet" type="text/css">
        
        <!--  -->
        <link href="/static/css/main.css" rel="stylesheet" type="text/css">
        <!-- Bootstrap CSS CDN -->
        <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        
        <!-- Our Custom CSS -->
        <link href="/static/css/style4.css" rel="stylesheet" type="text/css">
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
        
        <!-- Fonts Google -->
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        
 
        <!-- CSS for Lato family font -->
        <link href="/static/css/cssLaton.css" rel="stylesheet">
        
        
        <link href="/static/css/obras.css" rel="stylesheet">
        

        <title> Contraloría y Transparencia Gubernamental Gobierno del Estado de Nuevo León </title>
    </head>


    <body class="  pace-done">
        <div class="pace  pace-inactive">
            <div class="pace-progress" data-progress-text="100%" data-progress="99" style="width: 100%;">  
                <div class="pace-progress-inner">
                </div>
            </div>
            <div class="pace-activity">
            </div>
        </div>

        <div class="wrapper">
            <!-- Sidebar Holder -->
            <nav id="sidebar" style="min-height: 100%;">
                <div class="sidebar-header">
                    <div class="sjo-logo-big">
                        <img width="244" height="119" class="img-fluid" src="/static/images/logo.png">
                    </div>
                    <div class="sjo-logo-small">
                        <img width="244" height="119" class="img-fluid" src="/static/images/escudo.png">
                    </div>
                </div>
                <ul class="list-unstyled components">      
                
                
                          
                    <li class="menu-element"  id="{{ menu[1]['idHTML'] }}"  {{ menu[1]['isActive'] }}  >
                        <a  href="{{ menu[1]['url'] }}" >
                            <i class="{{ menu[1]['iconClass'] }}"></i>
                            <span class="menu-title">  {{ menu[1]['name'] }} </span>
                        </a>
                    </li>
                    <li class="menu-element"  id="{{ menu[2]['idHTML'] }}"  {{ menu[2]['isActive'] }} >
                        <a  href="{{ menu[2]['url'] }}"  >
                            <i class="{{ menu[2]['iconClass'] }}"></i>
                            <span class="menu-title" > {{ menu[2]['name'] }} </span>
                        </a>                       
                    </li>
                    <li class="menu-element"  id="{{ menu[3]['idHTML'] }}"   {{ menu[3]['isActive'] }} > 
                        <a   href="{{ menu[3]['url'] }}" >
                            <i class="{{ menu[3]['iconClass'] }}"> </i>
                            <span class="menu-title"> {{ menu[3]['name'] }} </span>
                        </a>
                    </li>
                    <li class="menu-element"  id="{{ menu[4]['idHTML'] }}"  {{ menu[4]['isActive'] }} >
                        <a   href="{{ menu[4]['url'] }}" >
                            <i class="{{ menu[4]['iconClass'] }}"> </i>
                            <span class="menu-title"> {{ menu[4]['name'] }} </span>
                        </a>
                    </li>   
                    <li class="menu-element"  id="{{ menu[5]['idHTML'] }}"  {{ menu[5]['isActive'] }} >
                        <a   href="{{ menu[5]['url'] }}" >
                            <i class="{{ menu[5]['iconClass'] }}"> </i>
                            <span class="menu-title"> {{ menu[5]['name'] }} </span>
                        </a>
                    </li>                   
                    
                    
                                  
                    
                </ul>
            </nav>



            <!-- Page Content Holder -->
            <div id="content" class="container-fluid">
                <h1 style="text-align: center;">Sistema de Obras</h1>
            <!-- Nav Bar -->
                <nav class="navbar navbar-default navbar-static-top" >
                    <div class="container-fluid">
                        <div class="navbar-header">
                            <button class="btn btn-info navbar-btn" id="sidebarCollapse" type="button">
                                <i class="fa fa-bars"></i>
                                <span class="sr-only">Toggle navigation</span>
                            </button>
                        </div>
                        <!--
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-user-circle" style="font-size: 20px; vertical-align: -1px;"></i>
                                Usuario
                            </button>
                            <div class="dropdown-menu dropdown-menu-sw" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" ><i class="fa fa-user"></i>Mi Perfil</a>               
                                
                                <a class="dropdown-item" href="#"><i class="fa fa-calendar"></i>Calendario</a>
                                <a class="dropdown-item" href="#"><i class="fa fa-envelope"></i>Buzón</a>     
                                
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" ><i class="fas fa-sign-out-alt"></i></i>Salir</a>
                            </div>
                        </div>   
                        -->                     
                    </div>
                </nav>


                <!--BEGIN TITLE & BREADCRUMB PAGE-->
                <div class="page-title-breadcrumb" id="title-breadcrumb-option-demo">
                    <ol class="breadcrumb page-breadcrumb">
                        <li>
                            <i class="fa fa-home"></i>
                            &nbsp;
                            <a  id="titleFirstLink" href="{{ menu[0]['url'] }}">{{ menu[0]['name'] }}</a>
                            &nbsp;&nbsp;
                            <i class="fa fa-angle-right"></i>
                            &nbsp;&nbsp;
                            <a  id="titleDepartment" > Registros de Obra </a>
                        </li>                         
                    </ol>
                    <div class="clearfix">
                    </div>
                </div>
                
                <!--END TITLE & BREADCRUMB PAGE-->
                

                <!--BEGIN CONTENT-->
                <div class="container-fluid">
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                             <div class="portlet box">
                                

                                <br>



                                <div class="portlet-body">

                                    <div id="addRegister">
                                        <div class="form-group">
                                            
                                            
                                            
                                            <div class="row rowAddRegister"  >
                                                <div class="col-md-12">
                                                    <span class="nameObraFollowUps"> {{dataProject.project_title}} <span>
                                                </div>



                                            </div>


                                            <div class="row rowAddRegister">
                                                <div class="col-md-4">
                                                    <span class="propertyProjectFollowUpsTitle"> Avance Físico: </span>
                                                    <span class="propertyProjectFollowUps"> {{dataProject.verified_progress}}  %</span>
                                                </div>
                                            
                                                <div class="col-md-4">
                                                    <span class="propertyProjectFollowUpsTitle"> Municipio </span>
                                                    <span class="propertyProjectFollowUps"  id="cityFollowUpsValue">  </span>
                                                </div>                                               
                                                
                                                <div class="col-md-4">
                                                    <span class="propertyProjectFollowUpsTitle"> Categoría </span>
                                                    <span class="propertyProjectFollowUps"> {{dataProject.category}} </span>
                                                </div>                                               
                                            </div>                                       
                                        
                                              
                                             <div class="row rowAddRegister">
                                                <div class="col-md-4">
                                                    <span class="propertyProjectFollowUpsTitle"> Dependencia </span>
                                                    <span class="propertyProjectFollowUps"> {{dataProject.department}} </span>
                                                </div>

                                                 <div class="col-md-4">
                                                     <span class="propertyProjectFollowUpsTitle"> Contrato </span>
                                                     <span class="propertyProjectFollowUps"> {{dataProject.contract_number}} </span>
                                                </div>

                                            </div> 

                                        </div>
                                    </div>


                                    <button style="float: right;" class="obrasButtonNormal"  onclick="listProjectsFollowUps.addFollowUp();"> Agregar Registro </button>
                                    <br><br><br>
                                    <span style="margin-left: 20px; font-size: 15px; font-weight: bold; color: #6a6a6a;"> Registros de Verificación </span>


                                    <table id="tableRegisters">
                                    </table>



                                    <div id="containerButtonsPagination">
                                    </div>



                                </div>
                            </div>
                        </div>
                    </div>                            
                </div>

                    <!-- BEGIN MODAL -->
                <div id="modalconfirm" class="modal fade" data-backdrop-limit="1" tabindex="-1" role="dialog">
                    <div class="modal-dialog" id="dialogConfirmModal">
                        <div class="modal-content">
                            <div class="modal-body" >
                                
                                <div id="containerModalImageZoom" style="text-align: center;">
                                    <p id="messageconfirm">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        Seguro que desea eliminar este elemento
                                    </p>    
                                    <button type="button" class="close confirmDeleteButton cancelButtonConfirm" data-dismiss="modal" aria-hidden="true"  >Cancelar</button>
                                    <button type="button" class="close confirmDeleteButton deleteButtonConfirm" data-dismiss="modal" aria-hidden="true" onclick="DELETERegisters.send();">Eliminar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                   
                <!-- END MODAL -->
        
        
        

            </div>
        </div>

        <div class="lds-roller"  id="waintingAnimation" >
            <div> </div>
            <div> </div>
            <div> </div>
            <div> </div>
            <div> </div>
            <div> </div>
            <div> </div>
            <div> </div>
        </div>
 
 
        <input id="cityIdValue" type="hidden" value="{{ dataProject.city_id }}" >
        <input id="goToLinkRegister" type="hidden" value="{{ goToLinkRegister }}" >
        <input id="goToAddRegister" type="hidden" value="{{ goToAddRegister }}" >
        <input id="projectId" type="hidden" value="{{ dataProject.project_id }}" >
        <input id="catalogName" type="hidden" value="{{ catalog }}" >
 

        
    
        <!-- Jquery -->
        <script src="/static/js/jquery-3.3.1.min.js"></script>
        <!-- Bootstrap -->
        <script src="/static/js/bootstrap.min.js"></script>
        <!-- Jquery UI -->
        <script src="/static/js/jquery-ui.js"></script>
        <!--  -->
        <script src="/static/js/jsonpath-0.8.0.js"></script>
        <!-- Highcharts -->
        <script src="/static/js/highcharts.js"></script>
        <!-- Highcharts 3D charts -->
        <script src="/static/js/highcharts-3d.js"></script>
        <!-- Module of Highcharts -->
        <script src="/static/js/exporting.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
        
        <!-- Notify -->
        <script src="/static/js/notify.min.js"></script>

        <!-- Js for crate list -->
        <script src="/static/js/listRegisters.js"></script>


        <script>
            
            $(document).ready(function () {

                //Funcionamiento del boton de la barra de menu
                $('#sidebarCollapse').on('click', function () {
                    $('#sidebar').toggleClass('active');
                });
                
                var city = document.getElementById('cityIdValue').value
                document.getElementById('cityFollowUpsValue').innerHTML = cities[ city ];

                listProjectsFollowUps.init();
                
                //Cuando se modifica un registro y regresa a este listado muestra el mensaje
                notifyRegisters.show();
            });



            var cities = [
            '',
                'Abasolo',
                'Agualeguas',
                'Los Aldamas',
                'Allende',
                'Anahuac',
                'Apodaca',
                'Aramberri',
                'Bustamante',
                'Cadereyta Jimenez',
                'Carmen',
                'Cerralvo',
                'Cienega de Flores',
                'China',
                'Dr. Arroyo',
                'Dr. Coss',
                'Dr. Gonzalez',
                'Galeana',
                'Garcia',
                'San Pedro Garza Garcia',
                'Gral. Bravo',
                'Gral. Escobedo',
                'Gral. Teran',
                'Gral. Trevi',
                'Gral. Zaragoza',
                'Gral. Zuazua',
                'Guadalupe',
                'Los Herreras',
                'Higueras',
                'Hualahuises',
                'Iturbide',
                'Juarez',
                'Lampazos de Naranjo',
                'Linares',
                'Marin',
                'Melchor Ocampo',
                'Mier y Noriega',
                'Mina',
                'Montemorelos',
                'Monterrey',
                'Paras',
                'Pesqueria',
                'Los Ramones',
                'Rayones',
                'Sabinas Hidalgo',
                'Salinas Victoria',
                'San Nicolas de los Garza',
                'Hidalgo',
                'Santa Catarina',
                'Santiago',
                'Vallecillo',
                'Villaldama'
            ];



            checkStages = [
                '',
                'TERMINADAS',
                'EN TIEMPO', 
                'CON RETRASO',
                'RESCINDIDAS',
                'NO INICIADAS',
                'CON AVANCE FINANCIERO MAYOR AL FÍSICO',
                'DE FUERZA CIVIL, POLICÍA  Y PENALES'
            ];
            
            checkStagesClass = ['','checkStage1','checkStage2','checkStage3','checkStage4','checkStage5','checkStage6','checkStage7']






            var setTag = {
                tr : function( dateF, verifiedProgress, check_stage, followUpsId){
                    checkStage = check_stage === null ? 'Sin registro' : checkStages[check_stage];
                    var checkDateFormat = datesGENL.formatOrder(dateF);
                    strTr = `
                        <tr idRegister="`+ followUpsId +`" onclick="listProjectsFollowUps.goToRegister(this);" >
                            <td> `+ checkDateFormat +` </td>
                            <td> `+ verifiedProgress +` %</td> 
                            <td> <div class=`+checkStagesClass[check_stage]+` >`+ checkStage +` </div></td> 
                        </tr>
                    `;
                    return strTr;
                },
                button : function(init, numValueButton, isActive, searchBy, valueSearchBy){
                    return '<button initL="'+ init +'" searchBy="'+ searchBy +'" valueSearchBy="'+ valueSearchBy +'"  onclick="listProjectsFollowUps.actionButtonPagination(this)" class="button_pag" '+isActive+'>'+ numValueButton +'</button>';
                },
                setTable : function(data){
                    
                    var strTRs = `
                        <tr> 
                            <th> Fecha de Verificación </th>  
                            <th> Avance Físico </th> 
                            <th> Estatus </th> 
                        </tr>
                    `;

                    for( var d = 0; d< listProjectsFollowUps.paginationStep ; d++){
                        if(data[d]){
                            strTRs += setTag.tr( 
                                data[d].check_date,
                                data[d].verified_progress, 
                                data[d].check_stage, 
                                data[d].id 
                            );
                        }
                    }

                    document.getElementById('tableRegisters').innerHTML = strTRs;
                   
                },                                      //searchBy
                createButtons: function( numAllRegisters, filterBy, valueSearchBy ){
                    
                    var numOfButtons = Math.ceil( numAllRegisters/listProjectsFollowUps.paginationStep ) ;
                    listProjectsFollowUps.numberOfButtons = numOfButtons ;
                    
                    var strAllButtons = '';
                    for(var b=0; b< numOfButtons ; b++ ){
                        var start = b * listProjectsFollowUps.paginationStep ;
                        var numLebelButton = b + 1;
                        var isActive = b==0? 'active' : '';
                        strAllButtons += setTag.button( start, numLebelButton, isActive, filterBy, valueSearchBy )
                    }
                    document.getElementById('containerButtonsPagination').innerHTML = strAllButtons;                   
                }
                          
            };


        </script>

    </body>
</html>
